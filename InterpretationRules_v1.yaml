map_name: Interpretation rules v1
status: stable
created: 2026-02-04
scope: Illustrator IP diagram reconstruction from reference images

authoritative_sources:
  - "# Coordinate Placement Spec v1.yaml"
  - "LayoutProfile_v1.yaml"
  - "User-confirmed mapping decisions (2026-02-04)"

fixed_document_rules:
  keep_guides_unchanged: true
  keep_layers_unchanged: true
  overlap_allowed: true
  strict_cell_grid_required: false
  follow_illustrator_layout_logic: true

image_interpretation_rules:
  default_behavior:
    count_rule: "For each color highlight detected, it must correspond to one of the following objects:
    
  text_in_reference_images:
    policy: referential_only
    rule: "Do not render words/sentences from the source image unless the object is a LABEL_* object."

  color_semantics:

    orange_highlight:
      meaning: LABEL
      target_object: LABEL__*
      placement: "Top-left of the area/object the highlight refers to"
      rule: 
        - If (there are x number of orange highlights) {
          create x LABEL__* objects positioned at the top left of the area/object it refers to ONLY IF none exist already
          }
      example: 
        - "If 3 orange highlights are present, create LABEL__A, LABEL__B, LABEL__C in their relevant areas."

    green_highlight:
      meaning: Dot zone area 
      target_object: AREA_DotZone__*
      placement: "Within the outlined area"
      rule: 
        - If (there are x number of green highlights) {
          create x AREA_DotZone__* objects covering the area it refers to
          }
      example:
        - "If 2 green highlights are present, create AREA_DotZone__001 and AREA_DotZone__002 covering the relevant areas."
      notes:
        - "Used to identify zone areas in a diagram."    

    blue_highlight:
      meaning: Square zone area
      target_object: AREA_SquareZone__*  
      placement: "Within the outlined area"
      rule: 
        - If (there are x number of blue highlights) {
          create x AREA_SquareZone__* objects covering the area it refers to
          }
      example:
        - "If 2 blue highlights are present, create AREA_SquareZone__001 and AREA_SquareZone__002 covering the relevant areas."
      notes:
        - "Used to identify zone areas in a diagram which do not have the same semantics as DotZones."
    
    unknown_highlight:
      rule: "If a highlight color is detected that does not match any defined color semantic, stop and prompt the user for clarification."

  connector_lines:
    create: false
    notes:
      - "Flow/connector lines are currently non-semantic and must be ignored."




object_mapping:
  team_leader_icon: [(icon resembling a person in a circle) or (text which states "... leader")]
    target: ICON_PeopleLeader__*
    type: ICON
  staff_person_icon: [icon resembling a person]
    target: ICON_Staff__*
    type: ICON
  pigeonholes_region_comp: [text which states "pigeonholes - region" or similar]
    target: COMP_RegionPigeonhole__*
    type: COMP
  pigeonholes_district_comp: [text which states "pigeonholes - district" or similar]
    target: COMP_DistrictPigeonhole__*
    type: COMP
  security_boxes_comp: [text which states "security boxes" or similar]
    target: COMP_SecureStorageBox__*
    type: COMP
  in_out_icon: [text which states "missorts tray"]
    target: ICON_InOutTray__*
    type: ICON
  stationery_kit_icon: [text which states "stationary"]
    target: ICON_Stationary__*
    type: ICON
  form_icon: [text which states "form/s" or similar]
    target: ICON_Form__*
    type: ICON
  disability_icon: [(icon resembling a dissability sign) or (text which states "disabled" or similar)]
    target: ICON_Disabled__*
    type: ICON
  chair_icon: [(icon resembling a chair) or (text which states "chair" or similar)]
    target: ICON_Chair__*
    type: ICON
  printer_icon: [(icon resembling a printer) or (text which states "note counter" or similar)]
    target: ICON_Printer__*
    type: ICON
  entrance_icon: [(icon resembling an entrance) or (text which states "entrance" or similar)]
    target: ICON_Entrance__*
    type: ICON
  exit_icon: [(icon resembling an exit) or (text which states "exit" or similar)]
    target: ICON_Exit__*
    type: ICON
  region_ballot_box_icon: [text which states "region ballot box" or similar]
    target: ICON_RegionBallotBox__*
    type: ICON
  district_ballot_box_icon: [text which states "district ballot box" or similar]
    target: ICON_DistrictBallotBox__*
    type: ICON
  declaration_env_ballot_box_icon: [text which states "declaration ballot box" or similar]
    target: ICON_DeclarationBallotBox__*
    type: ICON
  voting_booth_comp: [(icon resembling "COMP_VotingBooth__001") or (text which states "Voting booth" or similar)]
    target: COMP_VotingBooth__*
    type: COMP
  perimeter_bound: [path resembling a boundary/wall/perimeter]
    target: BOUND_Perimeter__*
    type: BOUND
  publication_icon: [(icon resembling a book or publication) or (text which states "publication" "book" or similar)]
    target: ICON_Publication__*
    type: ICON
  arrow_icon: [(icon resembling an arrow) & NOT (positioned right next to an entrance/exit that would indicate the arrow represents and exit/entrance)]
    target: ICON_Arrow__*
    type: ICON
  laptop_icon: [(icon resembling a laptop) or (text which states "laptop" or similar & NOT computer)]
    target: ICON_Laptop__*
    type: ICON
  ballot_box_icon: [(icon resembling a ballot box) or (text which states "ballot box" "BB" or similar)]
    target: ICON_BallotBox__*
    type: ICON
  furniture_area: [(icon resembling a table, typically a rectangular block with a solid fill)]
    target: AREA_Furniture__*
    type: AREA
  storage_area: [(icon resembling a table, typically a rectangular block with a solid fill)]
    target: AREA_Storage__*
    type: AREA


placement_and_composition_rules:
  composites:
    atomic_placement: true
    child_repositioning_allowed: false
    applies_to_prefixes: ["COMP_"]
  icons:
    independent_placement_allowed: true
    applies_to_prefixes: ["ICON_"]
  areas:
    independent_placement_allowed: true
    applies_to_prefixes: ["AREA_"]
  labels:
    orientation_rule:
      when_label: vertical

layer_rules:
  zone_objects:
    required_layer: "AREAS - Zones"
    fallback_if_missing: null
    applies_to: ["AREA_Zone__*", "BOUND__*"]

naming_and_instance_rules:
  suffix_strategy:
    default:
      preferred_start: "__001"
      increment_style: zero_padded_3
    LABEL_:
      preferred_start: "__A"
      increment_style: alpha_upper
  uniqueness:
    rule: "No two instances may share the same full name/cardinal suffix."
    example_valid: ["ICON_Staff__001", "ICON_Staff__002"]
    example_invalid: ["ICON_Staff__001", "ICON_Staff__001"]
    label_examples:
      valid: ["LABEL__A", "LABEL__B"]
      invalid: ["LABEL__A", "LABEL__A"]
  duplication_policy:
    rule: "Duplicate existing instances only when resulting names remain unique."

unused_assets_policy:
  inventory_artboard: "Unused assets"
  if_main_artboard_object_unused:
    action: move_to_unused_assets
    notes:
      - "Do not delete by default."
  deduplication_rule:
    action: "Keep non-duplicate assets in Unused assets inventory."
  capacity_rule:
    when_unused_assets_too_small:
      action: double_artboard_height
      axis: vertical

agent_output_contract:
  phase_1_interpretation:
    required_outputs:
      - "Mapping table: image element -> candidate object(s) -> confidence"
      - "Ambiguity/uncertainty list"
  phase_2_reconstruction_plan:
    required_outputs:
      - "Planned add/move/remove/rename actions"
      - "Target placements and naming assignments"
      - "Impact on Unused assets inventory"
  phase_3_script_generation:
    required_outputs:
      - "Illustrator JSX script to transform current state to approved target"
      - "No guide/layer structural changes"

